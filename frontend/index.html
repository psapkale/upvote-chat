<html>
   <script>
      const ws = new WebSocket('ws://localhost:8080', 'echo-protocol');
      const userId = Math.floor(Math.random() * 1000);
      ws.onopen = () => {
         ws.send(
            JSON.stringify({
               type: 'JOIN_ROOM',
               payload: {
                  name: 'prem',
                  userId,
                  roomId: '1',
               },
            })
         );
      };
      ws.onmessage = function (event) {
         try {
            const { payload, type } = JSON.parse(event.data);
            if (type === 'ADD_CHAT') {
               const textNode = document.createElement('div');
               textNode.innerHTML = payload.message + ` (${payload.upvotes})`;
               document.getElementById('messages').appendChild(textNode);
            }
         } catch (e) {
            console.error(e);
         }
      };
      function sendchat() {
         ws.send(
            JSON.stringify({
               type: 'SEND_MESSAGE',
               payload: {
                  message: document.getElementById('inputtext').value,
                  userId: userId,
                  roomId: '1',
               },
            })
         );
      }
   </script>
   Hello World
   <br />
   <input type="text" id="inputtext" />
   <div id="messages"></div>
   <br />
   <button onclick="sendchat()">Send chat</button>
</html>
